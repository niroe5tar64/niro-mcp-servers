---
date: 2025-12-22
topic: 複数 AI Agent 議論オーケストレーション
participants:
  - user
  - ai (orchestrator)
tags:
  - arch
  - product
  - process
---

# Summary
- 複数の AI Agent を議論させるには、役割設計と制約設定が最重要。専門性・視点を分け、ゴールと評価軸を明示する。
- オーケストレータ（司会役）が論点とターン数を管理し、発言順序と入力制約（context window 管理）を担う。
- メッセージパッシングはシリアルで十分だが、分岐検討時は並列生成→要約統合でコスト/品質を両立。
- ガードレールとして、アウトプットの形式、根拠要求、引用必須、トークン上限、終了条件をプロンプトで定義。
- ログ保存は議論要約＋決定/保留＋各エージェント発言のスナップショットを残す。生ログは必要に応じて別添。

## Decision
- 実装アプローチはこれから検討。まず小さな PoC を作り、司会型（シリアル進行）をベースにしつつ、必要な論点で並列生成＋要約統合を行うハイブリッド型を採用する。

## Notes
- 役割例: 「PM/ユーザ価値」「アーキ設計」「セキュリティ」「コスト/運用」「デビルズアドボケート」など。
- プロンプト基本形: 目的、各エージェントのロール/制約/出力形式、ターン数上限、司会の進行手順（論点→意見収集→要約→反論→収束）。
- 実装パターン
  - 司会型（シリアル進行）: 司会が前ターン要約を次の発言に渡す。トークン効率は良いが意見多様性はやや落ちる。小回りが利き、迷子になりにくい。
  - 並列生成＋要約統合: 同一入力に対し複数ロールで同時生成→司会が要約・統合。多様性高・コスト増。選択肢出し切りや分岐比較に有効。
  - ハイブリッド: 通常は司会型で進行し、分岐が必要な論点だけ並列生成で意見を出させ、要約統合して収束させる。
- 評価と終了条件: 「決定/保留/宿題」を明記し、決定理由と代替案も要約。宿題はタスク化。
- ログ運用: 本ファイルは要約ログ。生ログは同ディレクトリに `01-orchestrator-raw.md` のように番号 + ロール名 + `-raw.md` で配置する。
- ロール（識別子 / 役割と出力フォーマットの叩き台）
  - 共通: 箇条書き 3 点以内。根拠を簡潔に添える。推測は「推測: ...」と明示。
  - `facilitator`: 司会/進行。論点提示、発言順管理、要約と収束、終了条件確認を担当。出力は次ターンの論点/質問と現時点の要約（決定/保留/宿題）。
  - `pm-ux`: 課題と価値仮説、スコープ/優先度、代表ユーザフロー、摩擦点と入力負荷、成功指標や計測案。出力は課題/価値仮説、代表フロー（1-2 ステップ）、摩擦点、計測案。
  - `architect`: システム構成、責務分離、拡張性と技術的負債の見立て。出力はアーキ概要、責務/インタフェースの要点、拡張性と負債リスク、前提条件。
  - `ops-cost`: デプロイ/監視/SLO、運用負荷、コスト見積りと抑制策。出力は運用フロー、監視/SLO の要点、コスト影響（高中低）と抑制策、運用上の懸念。
  - `risk-security`: 認証/認可、データ保護、ロギング/監査、サプライチェーンリスク。出力は認証/認可・データ保護の懸念、ロギング/監査、サプライチェーンリスク、失敗シナリオと回避策。

- 司会プロンプト叩き台（実運用サイクル）
  1) ゴールと終了条件を宣言: 「目的」「決定/保留の判定基準」「ターン上限」を明示。
  2) 参加ロールと出力ルールを列挙: `pm-ux, architect, ops-cost, risk-security` に「箇条書き3点以内、根拠を添える、推測は明示」を伝える。
  3) 初回シリアル収集: 1ターン目は全ロールから意見を集め、`facilitator` が要約（決定/保留/宿題）と次ターン質問を返す。
  4) 論点絞り込み: 要約を踏まえ、深掘りしたい論点を 2–3 個に限定し、必要なものだけ並列で意見収集。
  5) 並列→要約統合: 並列取得した発言を `facilitator` が重複圧縮し、決定/保留/宿題を更新。推測は質問に変換。
  6) リスクチェック: `risk-security` と `ops-cost` に1ターン与え、見落としリスクと運用懸念を表面化。
  7) クロージング: `facilitator` が最終要約（決定/保留/宿題、理由と代替案、次アクション）を提示し終了。
- 詳細ガイド: 手順・ロール定義・ログ命名は `docs/decisions/guide/multi-agent/` に集約。
