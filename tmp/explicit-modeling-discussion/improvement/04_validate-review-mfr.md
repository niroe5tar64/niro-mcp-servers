# 変更案の具体化: validate-design / validate-impl

目的: 設計レビューと実装レビューで「問題モデルの有無・一貫性・制約の担保」を明確に検査する。

## 追加位置

- validate-design: 設計レビューのチェック項目に追加。
- validate-impl: 実装検証の「設計整合」「要件トレーサビリティ」周辺に追加。

## validate-design への追加案

### 追加チェック項目

- 問題モデルの明示: design内に「問題モデル確定」セクションが存在する。
- 要件モデルとの差分: requirementsのモデルとの差分が明記されている。
- 制約の担保: 各制約に対して、担保手段（実装/DB/フロー/テスト）が定義されている。
- 状態遷移の妥当性: 状態変数と行動の前提/効果に矛盾がない。

### レビュー出力への追加

- モデル整合性評価: OK/要修正 を明記する。
- 重大懸念の優先順位付け: 制約未定義や担保手段不明は最優先で指摘する。

## validate-impl への追加案

### 追加検証項目

- モデル参照の一致: tasksの「モデル参照」が実装に反映されている。
- 制約の実装反映: 主要制約がコード/DB/フロー/テストで担保されている。
- 状態遷移の禁止: 禁止パスが実装で拒否される（例外処理含む）。
- モデル差分の追従: designで更新されたモデルが実装に反映済み。

### 証拠の例

- コード: バリデーション、状態遷移ガード、DB制約、ワークフロー条件。
- テスト: 状態遷移テスト、制約違反テスト、モデルベーステスト。

## 運用ルール案

- 制約ID（C1, C2...）を設計と実装の双方で参照する。
- 重大制約が未実装の場合は NO-GO とする。
- モデル差分がある場合、実装検証に差分一覧を添付する。
