# デザインレビュー プロセス

## 目的
技術設計ドキュメントの対話的な品質レビューを行い、許容可能なリスクの範囲で実装に進める十分な堅牢性があるかを確認する。

## レビューフィロソフィー
- **品質保証であり、完璧主義ではない**
- **重要点に集中**: 最重要の懸念は最大 3 件まで
- **対話的なやり取り**: 一方的評価ではなく設計者と対話する
- **バランスの取れた評価**: 強みと弱みの双方を認識する
- **明確な判断**: 根拠付きで GO/NO-GO を決定する

## スコープと非目標

- スコープ: プロジェクト文脈と基準に照らして設計ドキュメントの品質を評価し、GO/NO-GO を決める。
- 非目標: 実装レベルの設計、深い技術調査、最終的な技術選定は行わない。これらは設計フェーズの反復に委ねる。

## 主要レビュー基準

### 1. 既存アーキテクチャ整合性（重要）
- 既存システムの境界/レイヤとの統合
- 既存アーキテクチャパターンとの一貫性
- 依存方向と結合度の適切な管理
- 現行モジュール構成との整合

### 2. 設計の一貫性と標準
- プロジェクトの命名規約とコード標準への準拠
- エラーハンドリングとログ方針の一貫性
- 設定および依存管理の統一
- 既存のデータモデリングパターンとの整合

### 3. 拡張性と保守性
- 将来要件への柔軟性
- 関心の分離と単一責任の明確さ
- テスト性とデバッグ性
- 要件に対して適切な複雑度

### 4. 型安全性とインターフェース設計
- 適切な型定義とインターフェース契約
- 危険なパターンの回避（例: TypeScript の `any`）
- 明確な API 境界とデータ構造
- 入力検証とエラーハンドリングの網羅

## レビュープロセス

### Step 1: 分析
レビュー基準に沿って設計を分析し、統合性、保守性、複雑さ、要件充足に影響する重要点に集中する。

### Step 2: 重大課題の特定（最大 3 件）
各課題:
```
🔴 **Critical Issue [1-3]**: [短いタイトル]
**Concern**: [具体的な問題]
**Impact**: [重要性]
**Suggestion**: [具体的な改善案]
**Traceability**: [requirements.md の要件ID/セクション]
**Evidence**: [設計ドキュメントのセクション/見出し]
```

### Step 3: 強みの認識
バランスを取るため、強い点を 1-2 件認める。

### Step 4: GO/NO-GO の決定
- **GO**: 重大なアーキテクチャ不整合がなく、要件が満たされ、実装の道筋が明確で、リスクが許容範囲
- **NO-GO**: 根本的な衝突、重大な欠落、高い失敗リスク、過度な複雑さ

## トレーサビリティと根拠

- 各重大課題を `requirements.md` の該当要件（ID またはセクション）に紐づける。
- 設計ドキュメント内の根拠箇所（セクション/見出し/図/成果物）を示す。
- 該当する場合、ステアリング文脈の制約も根拠として参照する。

## 出力フォーマット

### デザインレビュー サマリー
全体品質と準備状況を 2-3 文で記述。

### 重大課題（最大 3 件）
各項目: Issue, Impact, Recommendation, Traceability（例: 1.1, 1.2）, Evidence（design.md のセクション）。

### 設計の強み
1-2 点。

### 最終評価
決定（GO/NO-GO）、根拠（1-2 文）、次のステップ。

### 対話セクション
設計者の視点、代替案、確認事項、必要な変更点について対話する。

## 長さと焦点

- サマリー: 2-3 文
- 重大課題: 1 件あたり 5-7 行（Issue/Impact/Recommendation/Traceability/Evidence を含む）
- 全体レビュー: 簡潔に（目安 ~400 語）

## レビューガイドライン

1. **重要点に集中**: 成功に大きく影響する課題のみ指摘
2. **建設的なトーン**: 批判だけでなく解決案を提示
3. **対話的アプローチ**: 一方通行ではなく対話
4. **バランス評価**: 強みと弱みの両方を認める
5. **明確な決定**: 明確な GO/NO-GO 推奨
6. **実行可能なフィードバック**: すべての提案が実装可能であること

## 最終チェックリスト

- **重大課題 ≤ 3** かつ各項目に Impact と Recommendation がある
- **トレーサビリティ**: 各課題が要件 ID/セクションを参照
- **根拠**: 各課題が設計ドキュメントの根拠箇所を示す
- **決定**: GO/NO-GO と明確な根拠と次のステップ
